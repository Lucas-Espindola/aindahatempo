<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ainda Há Tempo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin="anonymous" />
    <style>
      html, body { background: #000; color: #fff; }

      .viewport {
        align-items: center;
        display: flex;
        flex-flow: column;
        height: 100vh;
        justify-content: center;
        width: 100vw;
      }

      .title { font-size: 6vw; text-transform: uppercase; }
      .countdown { font-size: 12vw; font-weight: 700; }
    </style>
  </head>
  <body>
    <main class="viewport">
    <header>
      <h1 class="title">ainda há tempo</h1>
    </header>
    <section class="countdown">
      {{ countdown }}
    </section>
    </main>
  </body>
  <script>
    const timeout = new Date("May 18 2018 12:00:00 UTC-3").getTime(),
          msPerSec = 1000,
          msPerMin = 1000 * 60,
          msPerHour = 1000 * 60 * 60,
          msPerDay = 1000 * 60 * 60 * 24

    function leadingZero(num, width = 2) {
      return Math.floor(num).toFixed().padStart(width, '0')
    }

    document.addEventListener('DOMContentLoaded', ev => {
      const title = document.querySelector('.title'),
            countdown = document.querySelector('.countdown')

      function expired() {
        title.innerHTML = 'não há mais tempo'
        countdown.parent.removeChild(countdown)
      }

      function updateCountdown() {
        const distance = timeout - Date.now()

        if (distance < 0) {
          return expired()
        }

        const days = leadingZero(distance / msPerDay),
              hours = leadingZero((distance % msPerDay) / msPerHour),
              mins = leadingZero((distance % msPerHour) / msPerMin),
              secs = leadingZero((distance % msPerMin) / msPerSec),
              msecs = leadingZero(distance % msPerSec, 3)

        countdown.innerHTML = `${days}:${hours}:${mins}:${secs}:${msecs}`
        window.requestAnimationFrame(updateCountdown)
      }

      updateCountdown()
    })
  </script>
</html>
